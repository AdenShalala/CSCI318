<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sales & Promotions - Management Dashboard</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body class="sales">
  <header>
    <img src="images/logo.png" alt="WareHost Logo" class="logo">
    <h1>Sales & Promotions</h1>
  </header>

  <div class="container sales">
    <div class="main-content">
      <!-- Current Promotions List -->
      <div class="card">
        <h2>Current Promotions</h2>
        <div class="promotions-list" id="promotionsList">
          <!-- Promotions will be dynamically added here later on -->
        </div>
      </div>

      <!-- Create New Promotion Form -->
      <div class="card">
        <h2>Create New Promotion</h2>
        <form id="promotionForm">
          <div class="form-group">
            <label for="promoName">Promotion Name</label>
            <input type="text" id="promoName" name="promoName" placeholder="e.g., Summer Sale 2024" required>
          </div>

          <div class="form-group">
            <label for="promoDescription">Description</label>
            <textarea id="promoDescription" name="promoDescription" rows="3"
              placeholder="Describe the promotion details..."></textarea>
          </div>

          <div class="form-group">
            <label for="discountPercent">Discount Percentage (%)</label>
            <input type="number" id="discountPercent" name="discountPercent" min="1" max="100" placeholder="e.g., 25"
              required>
          </div>

          <div class="form-group">
            <label>Promotion Period</label>
            <div class="date-range">
              <div>
                <label for="startDate">Start Date</label>
                <input type="date" id="startDate" name="startDate" required>
              </div>
              <div>
                <label for="endDate">End Date</label>
                <input type="date" id="endDate" name="endDate" required>
              </div>
            </div>
          </div>

          <div class="form-group">
            <label for="targetCategory">Target Category (Optional)</label>
            <select id="targetCategory" name="targetCategory">
              <option value="">All Products</option>
              <option value="electronics">Electronics</option>
              <option value="clothing">Clothing</option>
              <option value="home">Home & Garden</option>
              <option value="sports">Sports & Outdoors</option>
              <option value="books">Books</option>
            </select>
          </div>

          <button type="submit">Create Promotion</button>
        </form>
      </div>
    </div>

    <!-- AI-Suggested Promotions Panel -->
    <aside>
      <h2>🤖 AI Suggested Promotions</h2>
      <div id="aiSuggestions">
        <div class="ai-suggestion" onclick="applySuggestion(0)">
          <span class="ai-badge">AI RECOMMENDED</span>
          <div class="suggestion-title">Flash Weekend Sale</div>
          <div class="suggestion-desc">15% off on slow-moving inventory items</div>
          <div class="suggestion-impact">⚡ Expected 28% increase in sales</div>
        </div>

        <div class="ai-suggestion" onclick="applySuggestion(1)">
          <span class="ai-badge">TRENDING</span>
          <div class="suggestion-title">Bundle Deal Promotion</div>
          <div class="suggestion-desc">Buy 2 Get 20% off electronics</div>
          <div class="suggestion-impact">📈 Projected 35% revenue boost</div>
        </div>

        <div class="ai-suggestion" onclick="applySuggestion(2)">
          <span class="ai-badge">SEASONAL</span>
          <div class="suggestion-title">Spring Clearance Event</div>
          <div class="suggestion-desc">30% off winter clothing collection</div>
          <div class="suggestion-impact">🎯 Clear 45% excess inventory</div>
        </div>

        <div class="ai-suggestion" onclick="applySuggestion(3)">
          <span class="ai-badge">LOYALTY BOOST</span>
          <div class="suggestion-title">Member Exclusive Week</div>
          <div class="suggestion-desc">10% extra discount for loyalty members</div>
          <div class="suggestion-impact">💎 Increase retention by 22%</div>
        </div>
      </div>
    </aside>
  </div>

  <script>
    // Sample promotions data
    const promotions = [
      {
        id: 1,
        name: "Black Friday Mega Sale",
        description: "Huge discounts across all categories",
        discount: 40,
        startDate: "2025-11-28",
        endDate: "2025-11-30",
        category: "All Products",
        status: "upcoming"
      },
      {
        id: 2,
        name: "October Special",
        description: "Fall collection clearance",
        discount: 25,
        startDate: "2025-10-01",
        endDate: "2025-10-31",
        category: "Clothing",
        status: "active"
      },
      {
        id: 3,
        name: "Back to School",
        description: "Student discount on books and electronics",
        discount: 15,
        startDate: "2025-08-15",
        endDate: "2025-09-30",
        category: "Books",
        status: "expired"
      }
    ];

    // AI suggestions data
    const aiSuggestions = [
      {
        name: "Flash Weekend Sale",
        description: "15% off on slow-moving inventory items",
        discount: 15,
        category: "All Products"
      },
      {
        name: "Bundle Deal Promotion",
        description: "Buy 2 Get 20% off electronics",
        discount: 20,
        category: "electronics"
      },
      {
        name: "Spring Clearance Event",
        description: "30% off winter clothing collection",
        discount: 30,
        category: "clothing"
      },
      {
        name: "Member Exclusive Week",
        description: "10% extra discount for loyalty members",
        discount: 10,
        category: "All Products"
      }
    ];

    // Render promotions
    function renderPromotions() {
      const list = document.getElementById('promotionsList');

      if (promotions.length === 0) {
        list.innerHTML = '<div class="empty-state">No promotions yet. Create your first promotion!</div>';
        return;
      }

      list.innerHTML = promotions.map(promo => {
        const statusClass = `status-${promo.status}`;
        const statusText = promo.status.charAt(0).toUpperCase() + promo.status.slice(1);

        return `
                    <div class="promotion-item">
                        <div class="promotion-header">
                            <div>
                                <span class="promotion-title">${promo.name}</span>
                                <span class="status-badge ${statusClass}">${statusText}</span>
                            </div>
                            <span class="promotion-discount">${promo.discount}% OFF</span>
                        </div>
                        <div class="promotion-details">
                            <p>${promo.description}</p>
                            <div class="promotion-dates">
                                <span class="date-badge">📅 Start: ${formatDate(promo.startDate)}</span>
                                <span class="date-badge">📅 End: ${formatDate(promo.endDate)}</span>
                            </div>
                            <p style="margin-top: 8px;"><strong>Category:</strong> ${promo.category}</p>
                        </div>
                        <div class="promotion-actions">
                            <button class="btn-small" onclick="editPromotion(${promo.id})">Edit</button>
                            <button class="btn-small btn-danger" onclick="deletePromotion(${promo.id})">Delete</button>
                        </div>
                    </div>
                `;
      }).join('');
    }

    // Format date
    function formatDate(dateStr) {
      const date = new Date(dateStr);
      return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
    }

    // Handle form submission
    document.getElementById('promotionForm').addEventListener('submit', function (e) {
      e.preventDefault();

      const formData = new FormData(e.target);
      const today = new Date().toISOString().split('T')[0];
      const startDate = formData.get('startDate');
      const endDate = formData.get('endDate');

      let status = 'upcoming';
      if (startDate <= today && endDate >= today) {
        status = 'active';
      } else if (endDate < today) {
        status = 'expired';
      }

      const newPromotion = {
        id: promotions.length + 1,
        name: formData.get('promoName'),
        description: formData.get('promoDescription'),
        discount: parseInt(formData.get('discountPercent')),
        startDate: startDate,
        endDate: endDate,
        category: formData.get('targetCategory') || 'All Products',
        status: status
      };

      promotions.unshift(newPromotion);
      renderPromotions();
      e.target.reset();
      alert('✅ Promotion created successfully!');
    });

    // Apply AI suggestion
    function applySuggestion(index) {
      const suggestion = aiSuggestions[index];
      const today = new Date();
      const endDate = new Date();
      endDate.setDate(today.getDate() + 7); // 7 days from now

      document.getElementById('promoName').value = suggestion.name;
      document.getElementById('promoDescription').value = suggestion.description;
      document.getElementById('discountPercent').value = suggestion.discount;
      document.getElementById('startDate').value = today.toISOString().split('T')[0];
      document.getElementById('endDate').value = endDate.toISOString().split('T')[0];
      document.getElementById('targetCategory').value = suggestion.category;

      // Scroll to form
      document.getElementById('promotionForm').scrollIntoView({ behavior: 'smooth' });
    }

    // Edit promotion
    function editPromotion(id) {
      const promo = promotions.find(p => p.id === id);
      if (promo) {
        document.getElementById('promoName').value = promo.name;
        document.getElementById('promoDescription').value = promo.description;
        document.getElementById('discountPercent').value = promo.discount;
        document.getElementById('startDate').value = promo.startDate;
        document.getElementById('endDate').value = promo.endDate;
        document.getElementById('targetCategory').value = promo.category === 'All Products' ? '' : promo.category;

        document.getElementById('promotionForm').scrollIntoView({ behavior: 'smooth' });
      }
    }

    // Delete promotion
    function deletePromotion(id) {
      if (confirm('Are you sure you want to delete this promotion?')) {
        const index = promotions.findIndex(p => p.id === id);
        if (index > -1) {
          promotions.splice(index, 1);
          renderPromotions();
          alert('🗑️ Promotion deleted successfully!');
        }
      }
    }

    // Initialize
    renderPromotions();
  </script>
</body>

</html>